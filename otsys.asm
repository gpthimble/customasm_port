#bits 8
#subruledef register
{
    $0  =>  0
    $1  =>  1
    $2  =>  2
    $3  =>  3
    $4  =>  4
    $5  =>  5
    $6  =>  6
    $7  =>  7
    $8  =>  8
    $9  =>  9
    $10 => 10
    $11 => 11
    $12 => 12
    $13 => 13
    $14 => 14
    $15 => 15
    $16 => 16
    $17 => 17
    $18 => 18
    $19 => 19
    $20 => 20
    $21 => 21
    $22 => 22
    $23 => 23
    $24 => 24
    $25 => 25
    $26 => 26
    $27 => 27
    $28 => 28
    $29 => 29
    $gp => 28
    $sp => 29
    $30 => 30
    $31 => 31
}
#ruledef
{

}

#ruledef
{
sw ${rt} ,{offset: s16}+(${base}) => 0b101011 @ base`5 @ rt`5 @ offset`16
;rule for long offset
sw ${rt} ,{offset: i32}+(${base}) => {assert((offset < -32768)| (offset > 32767) ),
									;lui $1,offset[31:16]
									0b001111 @ 0b00000 @ 0b00001 @ offset[31:16] @ 
									;ori $1, $1, offset[15:0]
									0b001101 @ 0b00001 @ 0b00001 @ offset[15: 0] @
									;addu $1, $1, $base
									0b000000 @ base`5  @ 0b00001 @ 0b00001 @0b0000@0b100001@
									;sw $rt, $1
									0b101011 @ 0b00001 @ rt`5	 @ 0x0000         }


sw ${rt} ,(${base}) => 0b101011 @ base`5 @ rt`5 @ 0x0000

}


sw $1 , 43+($5)
sw $1 , label+($5)
label:
#d32 5667
